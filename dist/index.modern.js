function t(t){return t.toLocaleDateString("en-US")}function e(t){return parseInt(t.split("/")[1])}const n="streak";function r(e){const r=new Date,o={storage:e,startDate:t(r),lastLogin:t(r),count:0};return e.setItem(n,JSON.stringify(o)),o}function o(){let o=localStorage,a=function(t){const e=t.getItem(n);try{const t=JSON.parse(e);return""===t?null:t}catch(t){return console.error(t),null}}(o);if(a)try{!function(r){try{const o=JSON.parse(r.getItem(n)||""),a=e(t(new Date))-e(o.lastLogin);1===a?(o.count+=1,r.setItem(n,JSON.stringify(o))):1===a&&console.warn("Streak already incremented today")}catch(t){console.error("No streak to increment")}}(o)}catch(a){!function(o){try{const a=JSON.parse(o.getItem(n)||"");if(e(t(new Date))-e(a.lastLogin)>1){const t=r(o);o.setItem(n,JSON.stringify(t))}}catch(t){console.error("No streak to reset, maybe you want to initialise a new one?")}}(o)}else a=r(o);return a}export{o as getDailyStreak};
//# sourceMappingURL=index.modern.js.map
